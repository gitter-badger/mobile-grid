"use strict";angular.module("app.game").directive("grid",function(){return{restrict:"EA",template:'<div class="grid"><div class="inner" ng-transclude></div></grid>',transclude:!0,replace:!0,controller:function(){var a=[];this.calculate=function(){var b=0,c=0;angular.forEach(a,function(a){var d=parseInt(a.cols,10),e=parseInt(a.rows,10),f=Math.max(d,e);2===d?b=c=0:c>=b?b+=f:(c+=f,2===e&&(a.pullRight=!0))})},this.add=function(b){a.push(b)},this.remove=function(b){a=_.without(a,b)}}}}).directive("gridItem",function(){return{require:"^grid",restrict:"EA",scope:{cols:"@",rows:"@",last:"@"},template:'<div class="grid-item cols-{{cols}} rows-{{rows}}" ng-class="{\'pull-right\': pullRight}" ng-transclude></div>',transclude:!0,replace:!0,link:function(a,b,c,d){d.add(a),a.last&&d.calculate(),a.$on("destroy",function(){d.remove(a),d.calculate()})}}});